<Window x:Class="TaskbarMonitor.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:TaskbarMonitor.ViewModels"
        mc:Ignorable="d"
        Title="Settings" Height="400" Width="500"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize">
    
    <Window.Resources>
        <Style TargetType="GroupBox">
            <Setter Property="Margin" Value="0,0,0,10"/>
            <Setter Property="Padding" Value="10"/>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>
        <Style TargetType="TextBlock">
            <Setter Property="Margin" Value="0,0,0,2"/>
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TabControl Grid.Row="0">
            <!-- General Tab -->
            <TabItem Header="一般 (General)">
                <StackPanel Margin="10">
                    <GroupBox Header="表示設定">
                        <StackPanel>
                            <TextBlock Text="表示するディスプレイ:"/>
                            <ComboBox ItemsSource="{Binding AvailableDisplays}" 
                                      SelectedItem="{Binding SelectedDisplay}"
                                      DisplayMemberPath="Name"
                                      Margin="0,0,0,10"/>

                            <TextBlock Text="画面右端からのオフセット (px):"/>
                            <TextBox Text="{Binding UiOffsetRight}"/>
                        </StackPanel>
                    </GroupBox>
                </StackPanel>
            </TabItem>

            <!-- InfluxDB Tab -->
            <TabItem Header="InfluxDB">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <TextBlock Text="URL (e.g., http://localhost:8086):"/>
                        <TextBox Text="{Binding InfluxUrl}"/>

                        <TextBlock Text="Organization:"/>
                        <TextBox Text="{Binding InfluxOrg}"/>

                        <TextBlock Text="Bucket:"/>
                        <TextBox Text="{Binding InfluxBucket}"/>

                        <TextBlock Text="Measurement (default: environment):"/>
                        <TextBox Text="{Binding InfluxMeasurement}"/>

                        <TextBlock Text="Token:"/>
                        <TextBox Text="{Binding InfluxToken}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Network Tab -->
            <TabItem Header="ネットワーク (Network)">
                <StackPanel Margin="10">
                    <GroupBox Header="Ping監視先">
                        <StackPanel>
                            <TextBlock Text="ローカルDNS/サーバー IP:"/>
                            <TextBox Text="{Binding NetworkLocalDns}"/>

                            <TextBlock Text="デフォルトゲートウェイ IP:"/>
                            <TextBox Text="{Binding NetworkGateway}"/>
                        </StackPanel>
                    </GroupBox>
                    <TextBlock Text="※設定変更後はアプリケーションが再起動します。" Foreground="Red" TextWrapping="Wrap"/>
                </StackPanel>
            </TabItem>
        </TabControl>

        <!-- Buttons -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="保存して再起動" Command="{Binding SaveCommand}" Width="120" Height="30" Margin="0,0,10,0"/>
            <Button Content="キャンセル" Command="{Binding CancelCommand}" Width="100" Height="30"/>
        </StackPanel>
    </Grid>
</Window>
